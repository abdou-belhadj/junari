<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>


        <record id="view_crops_crops_form" model="ir.ui.view">
            <field name="name">crops.crops.form</field>
            <field name="model">crops.crops</field>
            <field name="arch" type="xml">
                <form string="CROPS">
                    <header>
                        <field name="stage_id" widget="statusbar" class="o_field_statusbar"
                               options="{'clickable': '1', 'fold_field': 'fold'}"
                               attrs="{'invisible': [('active', '=', False)]}"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object"
                                    attrs="{'invisible': [('process_count', '=', 0)]}"
                                    name="action_view_crops_process" icon="fa-tasks">
                                <div class="o_field_widget o_stat_info">
                                    <span class="o_stat_value"><field name="process_count"/></span>
                                    <span class="o_stat_text">Processes</span>
                                    <field name="process_count" invisible="1"/>
                                </div>
                            </button>

                        </div>
                        <field name="active" invisible="1"/>
                        <field name="image_1920" widget="image" class="oe_avatar"/>

                        <div class="oe_title">
                            <label for="product_id" string="Product Name"/>
                            <h1>
                                <div class="d-flex">
                                    <field class="text-break" name="product_id" options="{'no_create': True}"/>
                                </div>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <label for="date_from" string="Dates"/>
                                <div class="o_row">
                                    <span class="text-muted">From</span>
                                    <field name="date_from" class="oe_inline" widget="daterange"
                                           options="{'related_end_date': 'date_to'}"/>
                                    <span class="text-muted">To</span>
                                    <field name="date_to" class="oe_inline" widget="daterange"
                                           options="{'related_end_date': 'date_from'}"/>
                                </div>
                                <label for="number_of_days" string="Duration"/>
                                <div name="duration_display">
                                    <div class="o_row">
                                        <field name="number_of_days" class="oe_inline"/>
                                        <span>Days</span>
                                    </div>
                                </div>
                            </group>
                            <group>
                                <field name="color" widget="color_picker"/>
                            </group>
                            <notebook name="details">
                                <page string="Processes" name="process">
                                    <field name="process_ids">
                                        <tree editable="bottom" decoration-success="status == '03_done'"
                                              decoration-info="status == '02_in_process'"
                                              decoration-danger="status == '04_cancelled'">
                                            <field name="crops_id" invisible="1"/>
                                            <field name="status" invisible="1"/>
                                            <field name="process_id"/>
                                            <field name="assigned_to"/>
                                            <field name="date_from"/>
                                            <field name="date_to"/>
                                            <field name="description"/>
                                            <field name="fleet_ids" widget="many2many_tags"/>
                                            <button name="begin_process" type="object" string="BEGIN"
                                                    class="btn-primary"
                                                    attrs="{'invisible': [('status', '!=', '01_new')]}"/>
                                            <button name="done_process" type="object" string="DONE" class="btn-success"
                                                    attrs="{'invisible': [('status', '!=', '02_in_process')]}"/>
                                            <button name="cancel_process" type="object" string="Cancel"
                                                    attrs="{'invisible': [('status', 'not in', ['01_new', '02_in_process'])]}"/>
                                        </tree>
                                    </field>
                                </page>
                                <page string="Pest and Disease">
                                    <field name="diseases_ids">
                                        <tree editable="bottom">
                                            <field name="crops_id" invisible="1"/>
                                            <field name="is_done" invisible="1"/>
                                            <field name="disease_id"/>
                                            <field name="date_from"/>
                                            <field name="date_to"/>
                                            <field name="description"/>
                                        </tree>
                                    </field>
                                </page>
                            </notebook>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                        <field name="activity_ids" widget="mail_activity"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="view_crops_crops_kanban" model="ir.ui.view">
            <field name="name">crops.crops.kanban</field>
            <field name="model">crops.crops</field>
            <field name="arch" type="xml">
                <kanban default_group_by="stage_id" group_create="false" class="o_modules_kanban" sample="1">
                    <field name="image_1920"/>
                    <field name="stage_id"/>

                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill">
                                <field name="image_1920" class="o_kanban_image_fill_left d-block"
                                       widget="background_image"/>
                                <div class="oe_kanban_details">
                                    <h4>
                                        <a type="open">
                                            <field name="product_id"/>
                                        </a>
                                    </h4>
                                    <ul>
                                        <li>
                                            <span>Agriculture Date: <field name="date_from"/></span>
                                        </li>
                                        <li>
                                            <span>Harvest Date: <field name="date_to"/></span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_crops_crops_tree" model="ir.ui.view">
            <field name="name">crops.crops.tree</field>
            <field name="model">crops.crops</field>
            <field name="arch" type="xml">
                <tree string="CROPS">
                    <field name="product_id"/>
                </tree>
            </field>
        </record>


        <record id="act_crops_crops" model="ir.actions.act_window">
            <field name="name">CROPS</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">crops.crops</field>
            <field name="view_mode">kanban,tree,form</field>
        </record>

    </data>
</odoo>